<?xml version="1.0"?>

<?xml-stylesheet href="chrome://global/skin/global.css"?>
<?xml-stylesheet href="chrome://global/skin/findBar.css" type="text/css"?>

<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
  xmlns:html="http://www.w3.org/1999/xhtml"
  id="rdpinspectorconsole"
  windowtype="RDPInspectorConsole"
  title="RDP Inspector"
  width="640" height="480"
  screenX="10" screenY="10"
  persist="screenX screenY width height sizemode">

  <!-- Firefox Files -->
  <script type="application/x-javascript" src="chrome://global/content/globalOverlay.js"/>
  <script type="application/x-javascript" src="chrome://global/content/findBar.js"/>
  <script type="application/javascript" src="chrome://global/content/viewSourceUtils.js"/>

  <!-- String Bundles -->
  <stringbundle id="bundle_findBar" src="chrome://global/locale/findbar.properties"/>

    <!-- Commands -->
    <commandset id="mainCommandSet">
      <command id="cmd_find" oncommand="gFindBar.onFindCommand();"/>
      <command id="cmd_findAgain" oncommand="gFindBar.onFindAgainCmd();"/>
      <command id="cmd_findPrevious" oncommand="gFindBar.onFindPreviousCmd();"/>
    </commandset>

    <keyset id="mainKeyset">
      <key id="key_find" key="f" command="cmd_find" modifiers="accel"/>
    </keyset>

  <!-- Application Content -->
  <vbox flex="1">

    <!-- Logging Output -->
    <browser id="contentFrame" type="content-primary" flex="1"
      disablehistory="true" />

    <!-- Search bar -->
    <findbar id="FindToolbar" browserid="contentFrame"/>

    <script type="application/x-javascript">
    window.gFindBar = document.getElementById("FindToolbar");
    </script>

    <script type="application/x-javascript">
    <![CDATA[
    const MIN_WIDTH=700, MIN_HEIGHT=600;
    let resizeTaskID;

    window.addEventListener("resize", (event) => {
      let { outerWidth, outerHeight } = window;

      let newWidth = outerWidth >= MIN_WIDTH ? outerWidth : MIN_WIDTH;
      let newHeight = outerHeight >= MIN_HEIGHT ? outerHeight : MIN_HEIGHT;

      if (outerWidth < MIN_WIDTH || outerHeight < MIN_HEIGHT) {
        event.preventDefault();
        if (resizeTaskID) {
          clearTimeout(resizeTaskID);
        }
        resizeTaskID = setTimeout(() => window.resizeTo(newWidth, newHeight), 200);
        return false;
      }
    }, false)
    ]]>
    </script>

  </vbox>
</window>
